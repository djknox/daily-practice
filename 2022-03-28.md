## Daily Practice
### Monday, March 28th, 2022
---


# [Object-Oriented Principles in PHP](https://laracasts.com/series/object-oriented-principles-in-php)  


## [Object Composition and Abstractions](https://laracasts.com/series/object-oriented-principles-in-php/episodes/7)  

__Object Composition__
- when one class has a property that points to another class where behavior is located
- combining types to create a more complex object  
- typically done through constructor injection

Example:  
```
class Subscription
{
    public function __construct(StripeGateway $gateway)
    {
        $this->gateway = $gateway;
    }
}
```
- the `Subscription` class is composed of the `StripeGateway` class  

__Abstractions__
In the example above, the `Subscription` class doesn't need to know about a _specific_ gateway such as `StripeGateway`, it can just deal with an interface so that the billing gateway can change more easily (for example; if you move away from using Stripe and start using Braintree)  

Example:  

`Subscription` is composed of a `Gateway` interface:
```
class Subscription
{
    public function __construct(Gateway $gateway)
    {
        $this->gateway = $gateway;
    }
}
```

The `Gateway` interface defines a contract:
```
interface Gateway
{
    public function findCustomer();

    public function findSubscriptionByCustomer();
}
```

The `StripeGateway` conforms to the `Gateway` contract:
```
class StripeGateway implements Gateway
{
    public function findCustomer(){ ... }

    public function findSubscriptionByCustomer(){ ... }
}
```

A new `Subscription` instance can be created with a new `StripeGateway` instance because `StripeGateway` implements the `Gateway` interface:  
```
new Subscription(new StripeGateway());
```


## [Value Objects and Mutability](https://laracasts.com/series/object-oriented-principles-in-php/episodes/8)      

__Value Objects__  
An object that is defined according to its value/data rather than identity
- Example: three $5 bills on the table are each defined by their value, their identity is not important
- avoids using primitive types for everything
- improves readability
- helps with keeping data consistent

Example: creating an `Age` class rather than using an `int` to ensure that values can't be negative (a person's age cannot be a negative number)

__Mutable objects__: objects that can change 
- can change value of properties directly  

__Immutable objects__: objects that cannot change  
- must instantiate a new object for a new value


## [Exceptions](https://laracasts.com/series/object-oriented-principles-in-php/episodes/9)    

In situations where a clear business rule/requirement is being broken, it could be a good time to create a custom exception  
- should limit creating custom exceptions to important domain-specific requirements

Example: a team can have a maximum of 3 members  
```
public function store()
{
    $team = new Team;

    try {
        $team->add($user);
        $team->add($userTwo);
        $team->add($userThree);
        $team->add($userFour);
    } catch (MaximumMembersReached $e) {
        var_dump($e);
    } catch (Exception $e) {
        var_dump($e);
    }
}
```
- `MaximumMembersReached` exception thrown when >3 team members added

__Static Constructors__ on an exception:  
```
class TeamException extends Exception
{
    public static function fromTooManyMembers()
    {
        return new static('You may not add more than 3 team members');
    }
}
```

Throwing an exception with the `static` constructor:
```
if (count($this->members) === 3) {

    throw TeamException::fromTooManyMembers();

}
```
